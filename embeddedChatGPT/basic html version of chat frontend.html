<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Chat Widget</title>
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
            }

            /* Chat Widget Button */
            #chat-widget-button {
                position: fixed;
                bottom: 20px;
                right: 20px;
                background-color: #007bff;
                color: #fff;
                width: 60px;
                height: 60px;
                line-height: 60px;
                border-radius: 50%;
                text-align: center;
                font-size: 20px;
                cursor: pointer;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            }

            /* Chat Widget Container */
            #chat-widget-container {
                visibility: hidden; /* Adjusted for correct layout calculation */
                opacity: 0; /* Adjusted for correct layout calculation */
                position: fixed;
                bottom: 90px;
                right: 20px;
                background-color: #fff;
                border: 1px solid #e8e8e8;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                border-radius: 4px;
                width: 300px;
                height: 530px;
                display: flex;
                flex-direction: column;
                overflow-y: auto;
                transition: opacity 0.3s; /* Transition for smooth visibility */
            }

            #chat-header {
                background-color: #007bff;
                color: #fff;
                padding: 10px;
                display: flex;
                justify-content: center;
                align-items: center;
                border-top-left-radius: 4px;
                border-top-right-radius: 4px;
            }

            #chat-messages {
                padding: 10px;
                flex-grow: 1; /* make the chat-messages expand to take available space */
                overflow-y: auto; /* add scroll to chat-messages specifically */
            }

            #chat-input {
                display: flex;
                align-items: center;
                padding: 10px;
                margin-top: auto; /* New addition to force input to bottom */
            }

            #chat-input input {
                flex-grow: 1;
                padding: 8px;
                border: 1px solid #e8e8e8;
                border-radius: 4px;
            }

            #chat-input button {
                background-color: #007bff;
                color: #fff;
                padding: 8px 12px;
                border: none;
                border-radius: 4px;
                margin-left: 5px;
                cursor: pointer;
            }

            /* Media Query for responsiveness */
            @media screen and (max-width: 600px) {
                #chat-widget-container {
                    bottom: 70px;
                    right: 10px;
                    width: 250px;
                }
            }
        </style>
    </head>
    <body>
        <!-- Chat Widget Button -->
        <div id="chat-widget-button" onclick="toggleChatWidget()">
            <span>Chat</span>
        </div>

        <!-- Chat Widget Container -->
        <div id="chat-widget-container">
            <div id="chat-header">
                <span>Chat</span>
            </div>
            <div id="chat-messages">
                <!-- Chat messages will be displayed here -->
            </div>
            <div id="chat-input">
                <input type="text" placeholder="Type your message..." />
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>

        <script>
            let isChatOpen = false;

            function toggleChatWidget() {
                const chatWidget = document.getElementById("chat-widget-container");
                chatWidget.style.visibility = isChatOpen ? "hidden" : "visible"; /* Adjusted to work with visibility */
                chatWidget.style.opacity = isChatOpen ? 0 : 1; /* Adjusted to work with opacity */
                isChatOpen = !isChatOpen;
            }

            function sendMessage() {
                const input = document.querySelector("#chat-input input");
                const message = input.value.trim();

                if (message !== "") {
                    const chatMessages = document.getElementById("chat-messages");
                    const newMessage = document.createElement("div");
                    newMessage.textContent = message;
                    chatMessages.appendChild(newMessage);

                    // Clear input field after sending message
                    input.value = "";
                }
            }
        </script>
    </body>
</html>
